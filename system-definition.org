#+property: header-args :comments link :tangle-mode (identity #o400) :results output silent :mkdirp yes

* Setting up the system

#+begin_src lisp :tangle "system/main/simple-sets.asd"
(in-package :cl-user)

(defpackage :simple-sets-asd
  (:use :cl :asdf))

(in-package :simple-sets-asd)

(defsystem :simple-sets
  :depends-on (:alexandria)
  :components ((:file "package")
               (:file "relations"
                      :depends-on ("package"))
               (:file "sets"
                      :depends-on ("package"))))
#+end_src

#+begin_src lisp :tangle "system/test/simple-sets.asd"
(defsystem :simple-sets/tests
  :depends-on (:fiveam)
  :components ((:file "package")
               (:file "test-sets"
                      :depends-on ("package"))
               (:file "test-relations"
                      :depends-on ("package" "test-sets"))))
#+end_src

#+begin_src lisp :tangle "system/main/package.lisp"
(in-package :cl-user)

(defpackage :simple-sets
     (:use :cl)
     (:shadow :union :set-difference :intersection)
     (:export :add-to-rel
	      :add-tuple-to-rel
	      :subscribe-rel
	      :make-relation
	      :simple-set
	      :set=
	      :add-to-set
	      :remove-from-set
	      :add-all-to-set
	      :elements
	      :make-set
	      :copy-set
	      :difference
	      :union
	      :intersection
	      :contains-p
	      :size-set
	      :empty-set-p
	      :get-element-set))
#+end_src

#+begin_src lisp :tangle "system/test/package.lisp"
(defpackage :test-simple-sets
  (:use :cl :fiveam :simple-sets)
  (:shadowing-import-from :simple-sets :union :set-difference :intersection)
  (:export :test-simple-sets))
#+end_src
